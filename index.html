<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Korista Garage League</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- LOGIN -->
<div id="authBox" class="auth-box">
    <h2>GiriÅŸ Yap</h2>
    <input id="username" placeholder="KullanÄ±cÄ± adÄ± (kayÄ±t iÃ§in)">
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Åifre">
    <button onclick="register()">KayÄ±t Ol</button>
    <button onclick="login()">GiriÅŸ Yap</button>
    <p class="auth-info">
        Liderlik tablosu herkese aÃ§Ä±k. Ä°ddaa iÃ§in giriÅŸ yap.
    </p>
</div>

<!-- USER BAR -->
<div id="userBar" class="user-bar" style="display:none;">
    <span id="userInfo"></span>

    <!-- ğŸ‘‘ SADECE ADMÄ°N GÃ–RÃœR -->
    <button
        id="adminUpdateBtn"
        class="admin-btn"
        style="display:none; background:#ff4d4d;"
        onclick="calculateRace()"
    >
        âš™ï¸ HESAPLA
    </button>

    <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ Yap</button>
</div>

<div class="container">

    <h2 class="subtitle">KORISTA GARAGE HYPERCARS</h2>
    <h1>A LEAGUE TABLE</h1>

    <div class="season-info">
        SEASON 1 â€¢ 1 RACES PLAYED â€¢ CURRENT RACE: 8
    </div>

    <!-- LEADERBOARD -->
    <div class="table active">
        <div class="table-header">
            <span>POS</span>
            <span>CAR</span>
            <span>PTS</span>
        </div>

        <div class="row"><span>1</span><span>KOENIGSEGG JESKO ABSOLUT</span><span>25</span></div>
        <div class="row"><span>2</span><span>MERCEDES-MAYBACH EXELERO</span><span>18</span></div>
        <div class="row"><span>3</span><span>FERRARI P80/C</span><span>15</span></div>
        <div class="row"><span>4</span><span>PAGANI ZONDA HP BARCHETTA</span><span>12</span></div>
        <div class="row"><span>5</span><span>MERCEDES-BENZ 300 SLR</span><span>10</span></div>
        <div class="row"><span>6</span><span>PAGANI HUAYRA R</span><span>8</span></div>
        <div class="row"><span>7</span><span>FERRARI 812 SUPERFAST</span><span>6</span></div>
        <div class="row"><span>8</span><span>KOENIGSEGG CCXR TREVITA</span><span>4</span></div>
    </div>

    <!-- Ä°DDAA -->
    <button class="bet-btn" onclick="goToBet()">ğŸ° Ä°DDAA YAP</button>

    <!-- YOUTUBE -->
    <a class="youtube-btn"
       href="https://www.youtube.com/@KORISTAGARAGE"
       target="_blank">
        â–¶ VISIT OUR YOUTUBE CHANNEL
    </a>

    <div class="footer">koristagarage.online</div>
</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script src="firebase.js"></script>
<script src="auth.js"></script>

<!-- ğŸ”§ ADMIN â€“ HESAPLA FONKSÄ°YONU -->
<script>
async function calculateRace() {
    const raceId = prompt("Hangi yarÄ±ÅŸÄ± hesaplayalÄ±m? (Ã¶rn: race2)");
    if (!raceId) return;

    const raceRef = db.collection("races").doc(raceId);
    const raceSnap = await raceRef.get();

    if (!raceSnap.exists) {
        alert("BÃ¶yle bir yarÄ±ÅŸ yok");
        return;
    }

    const race = raceSnap.data();

    if (race.calculated === true) {
        alert("Bu yarÄ±ÅŸ zaten hesaplandÄ±");
        return;
    }

    if (race.status !== "finished") {
        alert("YarÄ±ÅŸ bitmeden hesaplama yapÄ±lamaz");
        return;
    }

    alert(
        raceId +
        " iÃ§in HESAPLA butonu Ã§alÄ±ÅŸtÄ±.\n" +
        "Bir sonraki adÄ±mda puan daÄŸÄ±tÄ±mÄ± eklenecek."
    );
}
</script>

</body>
</html>
